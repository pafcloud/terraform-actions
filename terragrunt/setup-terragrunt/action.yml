name: setup-terragrunt
description: Installs gruntworks' terragrunt

inputs:
  version:
    description: Terragrunt version, e.g. 0.26.2
    required: true

runs:
  using: composite
  steps:
    - id: setup
      shell: bash
      run: |
        download_url="https://github.com/gruntwork-io/terragrunt/releases/download/v${{ inputs.version }}/terragrunt_linux_amd64"
        tmp_bin_dir="$(mktemp -d $RUNNER_TEMP/XXXXXXXXXX)"
        terragrunt_bin="$tmp_bin_dir/terragrunt"

        curl -fsSL "$download_url" -o "$terragrunt_bin"
        chmod +x "terragrunt_bin"

        echo "$tmp_bin_dir" >> $GITHUB_PATH
